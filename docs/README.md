# Дипломный проект профессии «Тестировщик»

Дипломный проект представляет собой автоматизацию тестирования комплексного сервиса, взаимодействующего с СУБД и API Банка.

## Документация

* [План автоматизации](https://github.com/KateDenis/qa-diploma/blob/master/docs/Plan.md)
* [Отчет о тестировании](https://github.com/KateDenis/qa-diploma/blob/master/docs/Report.md)
* [Отчет об автоматизации](https://github.com/KateDenis/qa-diploma/blob/master/docs/Summary.md)


## Описание приложения

### Бизнес часть

Приложение представляет из себя веб-сервис.

![](pic/service.png)

Приложение предлагает купить тур по определённой цене с помощью двух способов:
1. Обычная оплата по дебетовой карте
1. Уникальная технология: выдача кредита по данным банковской карты

Само приложение не обрабатывает данные по картам, а пересылает их банковским сервисам:
* сервису платежей (далее - Payment Gate)
* кредитному сервису (далее - Credit Gate)

Приложение должно в собственной СУБД сохранять информацию о том, каким способом был совершён платёж и успешно ли он был совершён (при этом данные карт сохранять не допускается).

Заявлена поддержка двух СУБД:
* MySQL
* PostgreSQL

## Инструкция по запуску тестов:

### На компьютере должно быть установлено и настроено ПО:
* IntelliJ IDEA
* Docker
* DBeaver

### Запуск:
1. Склонировать на локальный репозиторий проект и открыть его в приложении **IntelliJ IDEA**.
2. В терминале **IntelliJ IDEA** с помощью команды **docker-compose up** поднять контейнер
3. **Для запуска с MySQL** в файле application.properties выбрать строчку **"spring.datasource.url=jdbc:mysql://localhost:3306/app"**, а 
строчку "#spring.datasource.url=jdbc:postgresql://localhost:5432/app" закомментировать. В файле build.gradle также выбрать подключение для MySQL: **""systemProperty "db.url", System.getProperty("db.url", "jdbc:mysql://localhost:3306/app")""**, а "systemProperty "db.url", System.getProperty("db.url", "jdbc:postgresql://localhost:5432/app")" закомментировать. 
**Для запуска с PostgreSQL** совершить обратные действия.
4. В новом окне терминала запустить приложение командой: **java -jar .\aqa-shop.jar**
5. Открыть в браузере приложение по адресу: **http://localhost:8080/**
6. Открыть **DBeaver** и создать подключение к PostgreSQL или MySQL реквизиты доступа к БД взять из **docker-compose.yml** (порт подключения, имя БД, пользователь, пароль)
7. В новом окне терминала запустить тесты командой **./gradlew clean test**

### Формирование отчетов Allure
* В новом окне терминала запустить формирование отчетов командой **./gradlew allureReport**

### Завершение работы
1. Остановить работу приложения командой **Ctrl+C** или закрыть окно терминала, в котором оно было запущено
2. Остановить контейнер командой **docker-compose down** в окне терминала IntelliJ IDEA в котором оно было запущено


